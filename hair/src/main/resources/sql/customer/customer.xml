<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="customer">

	<!-- 손님명단 -->
	<select id="list" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		select cust_no,
				cust_id,
				cust_name,
				cust_sex,
				cust_phone1,
				cust_phone2,
				cust_phone3,
				cust_REG_DATE,
				cust_UPD_DATE
		FROM hair_customer
        where cust_id like '%'||#{mem_id}||'%'
        order by cust_upd_date desc, cust_no desc
        limit 1,10
	</select>
	
	<!-- 손님검색 -->
	<select id="selectOne" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		select cust_no,
				cust_id,
				cust_name,
				cust_sex,
				cust_phone1,
				cust_phone2,
				cust_phone3,
				cust_REG_DATE,
				cust_UPD_DATE
		FROM hair_customer
        where cust_id = #{cust_id}
        and cust_name like concat('%', #{cust_name}, '%')
        and cust_phone1 like concat('%', #{cust_phone1}, '%')
	</select>
	
	<!-- 손님등록 -->
	<insert id="write" parameterType="java.util.HashMap">
		insert into hair_customer
		(cust_id
		, cust_name
		, cust_sex
		, cust_phone1
		, cust_phone2
		, cust_phone3
		, cust_reg_date
		, cust_upd_date)
		values
		( #{cust_id}
		, #{cust_name}
		, #{cust_sex}
		, #{cust_phone1}
		, #{cust_phone2}
		, #{cust_phone3}
		, now()
		, now())
	</insert>
</mapper>

